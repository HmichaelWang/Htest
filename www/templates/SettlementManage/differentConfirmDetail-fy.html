<ion-view view-title="差异确认" hide-nav-bar="true">

  <style type="text/css">
    input[disabled], input[readonly]:not(.cloned-text-input), select[disabled], select[readonly], textarea[disabled], textarea[readonly]:not(.cloned-text-input) {
      background-color: white;
      cursor: not-allowed;
    }
    .bar .button.button-clear .icon:before, .bar .button.button-clear.icon:before, .bar button.button-clear .icon:before, .bar button.button-clear.icon:before {
      font-size: 25px;
      line-height: 33px;
    }
  </style>

  <div class="bar neu-tab-top neu-stable-bar" ng-if="isDiff" style="background-image: none">
    <div style="width: 20%"></div>
    <div class="neu-tab neu-tab-left" ng-class="{ 'neu-tab-selected':cateShow==1}" ng-click="showCates(1)">我方差异</div>
    <div class="neu-tab neu-tab-comm" ng-class="{ 'neu-tab-selected':cateShow==2}" ng-click="showCates(2)">我方单据</div>
    <div class="neu-tab neu-tab-right" ng-class="{ 'neu-tab-selected':cateShow==3}" ng-click="showCates(3)">客户方单据</div>
    <div style="width: 20%"></div>
  </div>

  <div class="bar neu-tab-top neu-stable-bar" ng-if="!isDiff" style="background-image: none">
    <div style="width: 30%"></div>
    <div class="neu-tab neu-tab-left" ng-class="{ 'neu-tab-selected':cateShow==1}" ng-click="showCates(1)">我方差异</div>
    <div class="neu-tab neu-tab-right" ng-class="{ 'neu-tab-selected':cateShow==3}" ng-click="showCates(3)">客户方单据</div>
    <div style="width: 30%"></div>
  </div>

  <ion-content ng-class="{'has-footer':!hasDeal&&cateShow==1}" style="margin-top: 55px">

    <!--差异明细-->
    <div class="light-bg" ng-if="cateShow==1" style="height: 100%;">
      <div class="neu-font-7 neu-border-top neu-h40">
        <div class="neu-fontBlack neu-list-L">对账公司</div>
        <div class="neu-fontGray neu-list-R"><ion-scroll direction="x" scrollbar-x="false" overflow-scroll="false">{{differDetailInfo.fiBookName}}</ion-scroll></div>
      </div>
      <div class="neu-font-7 neu-border-top neu-h40">
        <div class="neu-fontBlack neu-list-L">客户</div>
        <div class="neu-fontGray neu-list-R"><ion-scroll direction="x" scrollbar-x="false" overflow-scroll="false">{{differDetailInfo.customerName}}</ion-scroll></div>
      </div>
      <div class="neu-font-7 neu-border-top neu-h40">
        <div class="neu-fontBlack neu-list-L">差异明细号</div>
        <div class="neu-fontGray neu-list-R"><ion-scroll direction="x" scrollbar-x="false" overflow-scroll="false">{{differDetailInfo.diffDetailNo}}</ion-scroll></div>
      </div>




      <ion-list>
        <ion-item style="padding: 0"
                  ng-click="toggleGroup(isArrShow[0])"
                  ng-class="{active: isGroupShown(isArrShow[0])}">
          <div class="item item-button-right" style="padding-top: 10px;padding-bottom: 10px">
            <a ng-class="isGroupShown(isArrShow[0]) ? 'coHx' : 'neu-fontBlack'">
              <span class="neu-font-7">差异详细信息</span>
            </a>
            <button class="button button-clear button-stable" style="top: 5px;right: 0;">
              <i class="icon" ng-class="isGroupShown(isArrShow[0]) ? 'ion-ios-arrow-down coHx':'ion-ios-arrow-right' "></i>
            </button>
          </div>
        </ion-item>

        <ion-item class="item-accordion neu-list-item" ng-show="isGroupShown(isArrShow[0])">
          <div class="neu-font-7">
            <div class="neu-fontBlack neu-list-AL">差异日期</div>
            <div class="neu-fontGray neu-list-AR">{{differDetailInfo.diffDate}}</div>
          </div>
        </ion-item>

        <ion-item class="item-accordion neu-list-item" ng-show="isGroupShown(isArrShow[0])">
          <div class="neu-font-7">
            <div class="neu-fontBlack neu-list-AL">差异系统</div>
            <div class="neu-fontGray neu-list-AR">{{differDetailInfo.dealSysName}}</div>
          </div>
        </ion-item>

        <ion-item class="item-accordion neu-list-item" ng-show="isGroupShown(isArrShow[0])">
          <div class="neu-font-7">
            <div class="neu-fontBlack neu-list-AL">差异单据类型</div>
            <div class="neu-fontGray neu-list-AR">{{differDetailInfo.hxDocTypeName}}</div>
          </div>
        </ion-item>

        <ion-item class="item-accordion neu-list-item" ng-show="isGroupShown(isArrShow[0])">
          <div class="neu-font-7">
            <div class="neu-fontBlack neu-list-AL">差异属性</div>
            <div class="neu-fontGray neu-list-AR">{{differDetailInfo.diffFlagName}}</div>
          </div>
        </ion-item>

        <ion-item class="item-accordion neu-list-item" ng-show="isGroupShown(isArrShow[0])">
          <div class="neu-font-7">
            <div class="neu-fontBlack neu-list-AL">客户单号</div>
            <div class="neu-fontGray neu-list-AR">{{differDetailInfo.csDocNo}}</div>
          </div>
        </ion-item>

        <ion-item class="item-accordion neu-list-item" ng-show="isGroupShown(isArrShow[0])">
          <div class="neu-font-7" ng-if="isDiff">
            <div class="neu-fontBlack neu-list-AL">海信方单据号</div>
            <div class="neu-fontGray neu-list-AR">{{differDetailInfo.hxDocNo}}</div>
          </div>
        </ion-item>

        <ion-item class="item-accordion neu-list-item" ng-show="isGroupShown(isArrShow[0])">
          <div class="neu-font-7">
            <div class="neu-fontBlack neu-list-AL">客户费用描述</div>
            <div class="neu-fontGray neu-list-AR"><ion-scroll direction="x" style="padding-top: 2px">{{differDetailInfo.diffContext}}</ion-scroll></div>
          </div>
        </ion-item>

      </ion-list>

      <div class="neu-font-7 neu-h40" ng-class="{'neu-border-top':isArrShow[0].show}">
        <div class="neu-fontBlack neu-list-L">差异大类</div>
        <div class="neu-fontGray neu-list-R">{{differDetailInfo.diffDesc}}</div>
      </div>
      <div class="neu-font-7 neu-border-top neu-h40">
        <div class="neu-fontBlack neu-list-L">差异小类</div>
        <div class="neu-fontGray neu-list-R">{{differDetailInfo.childDiffTypeDesc}}</div>
      </div>
      <div class="neu-font-7 neu-border-top neu-h40">
        <div class="neu-fontBlack neu-list-L">差异金额</div>
        <div class="neu-fontGray neu-list-R">{{differDetailInfo.diffHsamt | currency:""}}</div>
      </div>
      <div class="neu-font-7 neu-border-top">
        <div class="neu-fontBlack auto-line-dv1">差异说明</div>
        <div class="neu-fontGray neu-list-R" ng-if="differDetailInfo.remark.length<13">{{differDetailInfo.remark}}</div>
        <div class="neu-fontGray auto-line-dv2" ng-if="differDetailInfo.remark.length>=13">{{differDetailInfo.remark}}</div>
      </div>
      <div class="neu-font-7 neu-border-top neu-h40" ng-if="differDetailInfo.hxDocType=='RB_ORDER'">
        <div class="neu-fontBlack neu-list-L">差异处理方式</div>
        <div class="neu-fontGray neu-list-R" ng-if="hasDeal">{{differDetailInfo.diffDealTypeName}}</div>
        <div class="neu-fontGray neu-list-R" ng-if ="!hasDeal" style="width: 60%;position: relative;padding-top: 3px">
          <input type="text" class="neu-input-border neu-input-common" ng-model="selData" ng-click="showPopup()" readonly placeholder="请选择" style="height: 30px;border: solid 1px #A1A1A1;padding: 0 5px" >
          <i class="icon ion-chevron-down icon-list-dowm"></i>
        </div>
      </div>

      <div class="neu-font-7 neu-border-top neu-border-btm" ng-if="!hasDeal" style="height: 68px">
        <div class="neu-fontBlack neu-list-L" style="padding-left: 15px;height: 40px;line-height: 40px;">差异确认说明：</div>
        <div class="neu-fontGray neu-list-inputR" style="height: 65px">
          <textarea class="neu-input-border neu-textarea-common" ng-model="text.confirmDesc"></textarea>
        </div>
      </div>

      <div class="neu-font-7 neu-border-top neu-border-bottom"  ng-if="hasDeal">
        <div class="neu-fontBlack auto-line-dv1">差异确认说明</div>
        <div class="neu-fontGray neu-list-R" ng-if="differDetailInfo.confirmDesc.length<13">{{differDetailInfo.confirmDesc}}</div>
        <div class="neu-fontGray auto-line-dv2" ng-if="differDetailInfo.confirmDesc.length>=13">{{differDetailInfo.confirmDesc}}</div>
      </div>
    </div>

    <!--客户方数据-->
    <div class="light-bg" ng-if="cateShow==3" style="height: 100%;">
      <!--<div class="neu-font-7 neu-border-top neu-h40">
        <div class="neu-fontBlack neu-list-L">客户</div>
        <div class="neu-fontGray neu-list-R">{{customerInfo.customerName}}</div>
      </div>
      <div class="neu-font-7 neu-border-top neu-h40">
        <div class="neu-fontBlack neu-list-L">对账公司</div>
        <div class="neu-fontGray neu-list-R">{{customerInfo.fiBookName}}</div>
      </div>-->
      <div class="neu-font-7 neu-border-top neu-h40">
        <div class="neu-fontBlack neu-list-L">大连锁名称</div>
        <div class="neu-fontGray neu-list-R">{{customerInfo.csTypeName}}</div>
      </div>
      <div class="neu-font-7 neu-border-top neu-h40">
        <div class="neu-fontBlack neu-list-L">费用订单号</div>
        <div class="neu-fontGray neu-list-R">{{customerInfo.csCostNo}}</div>
      </div>
      <div class="neu-font-7 neu-border-top neu-h40">
        <div class="neu-fontBlack neu-list-L">费用订单日期</div>
        <div class="neu-fontGray neu-list-R">{{customerInfo.csCostDate}}</div>
      </div>
<!--      <div class="neu-font-7 neu-border-top neu-h40">
        <div class="neu-fontBlack neu-list-L">费用发生起止日期</div>
        <div class="neu-fontGray neu-list-R">{{customerInfo.csActbDate}}-{{customerInfo.csActeDate}}</div>
      </div>-->
      <div class="neu-font-7 neu-border-top neu-h40">
        <div class="neu-fontBlack neu-list-L">费用描述</div>
        <div class="neu-fontGray neu-list-R"><ion-scroll direction="x" scrollbar-x="false" overflow-scroll="false">{{customerInfo.csCostDesc}}</ion-scroll></div>
      </div>
      <div class="neu-font-7 neu-border-top neu-h40">
        <div class="neu-fontBlack neu-list-L">供应商确认函号</div>
        <div class="neu-fontGray neu-list-R">{{customerInfo.csSupplierLetter}}</div>
      </div>
      <div class="neu-font-7 neu-border-top neu-h40">
        <div class="neu-fontBlack neu-list-L">费用状态</div>
        <div class="neu-fontGray neu-list-R">{{customerInfo.statusFlagName}}</div>
      </div>
      <div class="neu-font-7 neu-border-top neu-h40">
        <div class="neu-fontBlack neu-list-L">品牌名称</div>
        <div class="neu-fontGray neu-list-R">{{customerInfo.brandName}}</div>
      </div>
<!--      <div class="neu-font-7 neu-border-top neu-h40">
        <div class="neu-fontBlack neu-list-L">待确认数量</div>
        <div class="neu-fontGray neu-list-R">{{customerInfo.unConfirmQty}}</div>
      </div>-->
      <div class="neu-font-7 neu-border-top neu-h40">
        <div class="neu-fontBlack neu-list-L">金额</div>
        <div class="neu-fontGray neu-list-R">{{customerInfo.confirmAmt | currency:""}}</div>
      </div>
      <div class="neu-font-7 neu-border-top neu-h40">
        <div class="neu-fontBlack neu-list-L">未核金额</div>
        <div class="neu-fontGray neu-list-R">{{customerInfo.unHdAmt | currency:""}}</div>
      </div>
<!--      <div class="neu-font-7 neu-border-top neu-h40">
        <div class="neu-fontBlack neu-list-L">确认数量</div>
        <div class="neu-fontGray neu-list-R">{{customerInfo.confirmQty}}</div>
      </div>-->
      <div class="neu-font-7 neu-border-top neu-border-bottom neu-h40">
        <div class="neu-fontBlack neu-list-L">核对状态</div>
        <div class="neu-fontGray neu-list-R">{{customerInfo.hdStatusName}}</div>
      </div>
    </div>

    <!--海信方数据-->
    <div class="light-bg" ng-if="cateShow==2" style="height: 100%;">
     <!-- <div class="neu-font-7 neu-border-top neu-h40">
        <div class="neu-fontBlack neu-list-L">客户</div>
        <div class="neu-fontGray neu-list-R">{{hisenseInfo.customerName}}</div>
      </div>
      <div class="neu-font-7 neu-border-top neu-h40">
        <div class="neu-fontBlack neu-list-L">对账公司</div>
        <div class="neu-fontGray neu-list-R">{{hisenseInfo.fiBookName}}</div>
      </div>-->
      <div class="neu-font-7 neu-border-top neu-h40">
        <div class="neu-fontBlack neu-list-L">海信系统来源</div>
        <div class="neu-fontGray neu-list-R">{{hisenseInfo.dealSysName}}</div>
      </div>
      <div class="neu-font-7 neu-border-top neu-h40">
        <div class="neu-fontBlack neu-list-L">海信单据来源</div>
        <div class="neu-fontGray neu-list-R">{{hisenseInfo.hxDocTypeName}}</div>
      </div>

      <!--政策核对单-->
      <div ng-if="hisenseInfo.hxDocType == 'RB_ORDER'">
        <div class="neu-font-7 neu-border-top neu-h40">
          <div class="neu-fontBlack neu-list-L">确认单号</div>
          <div class="neu-fontGray neu-list-R">{{hisenseInfo.confirmNo}}</div>
        </div>
        <div class="neu-font-7 neu-border-top neu-h40">
          <div class="neu-fontBlack neu-list-L">确认日期</div>
          <div class="neu-fontGray neu-list-R">{{hisenseInfo.confirmDate}}</div>
        </div>
        <div class="neu-font-7 neu-border-top neu-h40">
          <div class="neu-fontBlack neu-list-L">政策客户编号</div>
          <div class="neu-fontGray neu-list-R"><ion-scroll direction="x" scrollbar-x="false" overflow-scroll="false">{{hisenseInfo.policyCusotmerCode}}</ion-scroll></div>
        </div>
        <div class="neu-font-7 neu-border-top neu-h40">
          <div class="neu-fontBlack neu-list-L">政策名称</div>
          <div class="neu-fontGray neu-list-R"><ion-scroll direction="x" scrollbar-x="false" overflow-scroll="false">{{hisenseInfo.policyName}}</ion-scroll></div>
        </div>
        <div class="neu-font-7 neu-border-top neu-h40">
          <div class="neu-fontBlack neu-list-L">利润中心</div>
          <div class="neu-fontGray neu-list-R">{{hisenseInfo.prfcName}}</div>
        </div>
        <div class="neu-font-7 neu-border-top neu-h40">
          <div class="neu-fontBlack neu-list-L">状态</div>
          <div class="neu-fontGray neu-list-R">{{hisenseInfo.statusFlagName}}</div>
        </div>
        <div class="neu-font-7 neu-border-top neu-h40">
          <div class="neu-fontBlack neu-list-L">含税金额</div>
          <div class="neu-fontGray neu-list-R">{{hisenseInfo.confirmAmt | currency:""}}</div>
        </div>
        <div class="neu-font-7 neu-border-top neu-border-bottom neu-h40">
          <div class="neu-fontBlack neu-list-L">已核金额</div>
          <div class="neu-fontGray neu-list-R">{{hisenseInfo.hdAmt | currency:""}}</div>
        </div>
      </div>

        <!--ssc欠付单-->
      <div ng-if="hisenseInfo.hxDocType == 'PIA_ORDER'">
        <div class="neu-font-7 neu-border-top neu-h40">
          <div class="neu-fontBlack neu-list-L">欠付单号</div>
          <div class="neu-fontGray neu-list-R">{{hisenseInfo.piaNo}}</div>
        </div>
        <div class="neu-font-7 neu-border-top neu-h40">
          <div class="neu-fontBlack neu-list-L">欠付日期</div>
          <div class="neu-fontGray neu-list-R">{{hisenseInfo.piaDate}}</div>
        </div>
        <div class="neu-font-7 neu-border-top neu-h40">
          <div class="neu-fontBlack neu-list-L">计划使用部门</div>
          <div class="neu-fontGray neu-list-R">{{hisenseInfo.planOrgName}}</div>
        </div>
        <div class="neu-font-7 neu-border-top neu-h40">
          <div class="neu-fontBlack neu-list-L">计划使用期间</div>
          <div class="neu-fontGray neu-list-R">{{hisenseInfo.planUsePeriod}}</div>
        </div>
        <div class="neu-font-7 neu-border-top neu-h40">
          <div class="neu-fontBlack neu-list-L">计划项目编码</div>
          <div class="neu-fontGray neu-list-R">{{hisenseInfo.planProjCode}}</div>
        </div>
        <div class="neu-font-7 neu-border-top neu-h40">
          <div class="neu-fontBlack neu-list-L">计划项目名称</div>
          <div class="neu-fontGray neu-list-R"><ion-scroll direction="x" scrollbar-x="false" overflow-scroll="false">{{hisenseInfo.planProjName}}</ion-scroll></div>
        </div>
        <div class="neu-font-7 neu-border-top neu-h40">
          <div class="neu-fontBlack neu-list-L">欠付金额</div>
          <div class="neu-fontGray neu-list-R">{{hisenseInfo.piaAmt | currency:""}}</div>
        </div>
        <div class="neu-font-7 neu-border-top neu-h40">
          <div class="neu-fontBlack neu-list-L">调减金额</div>
          <div class="neu-fontGray neu-list-R">{{hisenseInfo.subAmt | currency:""}}</div>
        </div>
        <div class="neu-font-7 neu-border-top neu-h40">
          <div class="neu-fontBlack neu-list-L">消化金额</div>
          <div class="neu-fontGray neu-list-R">{{hisenseInfo.digestAmt | currency:""}}</div>
        </div>
        <div class="neu-font-7 neu-border-top neu-h40">
          <div class="neu-fontBlack neu-list-L">已报销金额</div>
          <div class="neu-fontGray neu-list-R">{{hisenseInfo.reimburseAmt | currency:""}}</div>
        </div>
        <div class="neu-font-7 neu-border-top neu-h40">
          <div class="neu-fontBlack neu-list-L">利润中心</div>
          <div class="neu-fontGray neu-list-R">{{hisenseInfo.prfcName}}</div>
        </div>
        <div class="neu-font-7 neu-border-top neu-h40">
          <div class="neu-fontBlack neu-list-L">余额</div>
          <div class="neu-fontGray neu-list-R">{{hisenseInfo.suplusAmt | currency:""}}</div>
        </div>
        <div class="neu-font-7 neu-border-top neu-h40">
          <div class="neu-fontBlack neu-list-L">税率</div>
          <div class="neu-fontGray neu-list-R">{{hisenseInfo.hdRate}}</div>
        </div>
        <div class="neu-font-7 neu-border-top neu-h40">
          <div class="neu-fontBlack neu-list-L">含税余额</div>
          <div class="neu-fontGray neu-list-R">{{hisenseInfo.suplusHsamt | currency:""}}</div>
        </div>
        <div class="neu-font-7 neu-border-top neu-border-bottom neu-h40">
          <div class="neu-fontBlack neu-list-L">状态</div>
          <div class="neu-fontGray neu-list-R">{{hisenseInfo.statusFlagName}}</div>
        </div>

      </div>

    </div>

  </ion-content>

<!--  <ion-footer-bar class="stable-bg" ng-if="hasDeal">
    <button class="button button-clear button-dark" style="width: 33%;margin-left: 33%" ng-click="goBack()">返回</button>
  </ion-footer-bar>-->

  <ion-footer-bar class="stable-bg" ng-if="!hasDeal&&cateShow==1">
    <button class="button button-clear" style="width: 5%;"></button>
    <button class="button button-clear" style="width: 33%;color: #009E9F" ng-click="approvalPass()"><a class="icon ion-android-done coHx"></a>通过</button>
    <button class="button button-clear" style="width: 24%;"></button>
    <button class="button button-clear" style="width: 33%;color: #888888;" ng-click="approvalReject()"><a class="icon icon-small ion-android-close neu-fontGray"></a>驳回</button>
    <button class="button button-clear" style="width: 5%;"></button>
  </ion-footer-bar>
</ion-view>
